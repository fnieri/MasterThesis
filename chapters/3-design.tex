\chapter{Design}
    This chapter aims to first extend the concepts of $\Delta$QSD, giving more insights into how the different parts of the systemneed to be instrumented to correctly work together.
    \begin{itemize}
        \item We first provide concepts of probes, we extend the $\Delta$QSD notion of failure and describe how time series will work in our oscilloscope, this part is crucial to understand how the measurements are done in real time.
        \item We then explain the global design of the system (see \cref{fig:sys_diag}) in two parts: \\
            Firstly, we explain the application side, where the Erlang running system is. Consequently, it's where the $\Delta$Q adapter interface will be. It performs the translation of spans to outcome instances thanks to the inserted probes. \\
            Secondly, the oscilloscope side. There, the server receives information about outcome instances from the adapter. The $\Delta$Q oscilloscope can then plot $\Delta$Q graphs from the received instances. In the oscilloscope one can define outcome diagrams, set parameters for probes and control the adapter.
        \item Lastly, we provide high level concepts of execution windows, triggers and snapshot. These are the key design elements of the oscilloscope. 
    \end{itemize}

    \begin{figure}[H]
        \begin{center}
            \includegraphics[scale = 0.8]{tikz/sut-stub-osc.pdf}
        \end{center}
        \caption{Global system design diagram. The two sides communicate via TCP sockets to share information about outcome instances and probe parameters.}
        \label{fig:sys_diag}
    \end{figure}

    \section{Measurement concepts}
    \input{chapters/3_design/probes.tex}
    \input{chapters/3_design/to.tex}
    \input{chapters/3_design/timeseries.tex}
    \input{chapters/3_design/erlang_instr.tex}  
    \input{chapters/3_design/c_instr.tex}
    \input{chapters/3_design/diagram.tex}
    \input{chapters/3_design/window.tex} 
    \input{chapters/3_design/triggers.tex}
