\section{Application side} 
    
    Before delving deeper into the parts, we present the global system design diagram. We recognise two separate parts, the Erlang side, where the system under test is, and the C++ side, where the $\Delta$Q oscilloscope receives information from the system under test to display graphs.

    \begin{figure}[H]
        \begin{center}
            \includegraphics[width=\textwidth]{tikz/sut-stub-osc.pdf}
        \end{center}
        \caption{Global system design diagram.}
    \end{figure}


    \subsection{System under test} The system under test \textbf{(S.U.T)} is the Erlang system the engineer wishes to observe, it ideally is a system which already is instrumented with OpenTelemetry. The ideal system where $\Delta$QSD is more useful is a system that executes many independent instances of the same action \cite{dq-tut}. 
    
    \subsection{$\Delta$Q Adapter} The $\Delta$Q adapter is the \texttt{dqsd\_otel} Erlang application \cite{wrapper}, it starts and ends OpenTelemetry spans and translates them to outcome instances which are useful for the oscilloscope. This can be done thanks to probes being attached to the system under test, like an oscilloscope would! The outcome instances end normally like OpenTelemetry spans or, additionally, can timeout, given a custom timeout ($dMax$), and fail, \textit{according to user's definition of failure}. 
    
    Handling of OpenTelemetry spans which goes beyond starting and ending them is delegated to the user, who may wish to do further operations with their spans. 
    The adapter is called from the system under test and communicates outcome instances data to the oscilloscope via TCP. 
    
    The adapter can receive messages from the oscilloscope, the messages are about updating probe's $dMax$ or starting and stopping the sending of data to the oscilloscope.
    \subsection{Inserting probes in Erlang - From spans to outcome instances}
        OpenTelemetry spans are useful to carry context, attributes and baggage in a program. The plethora of attributes they have is nevertheless too much for the oscilloscope.

        To get the equivalent of spans for the oscilloscope, the adapter needs to be called at the starting events of a probe to start an instance of a probe, and at the ending events to end the outcome instance and send the data to the oscilloscope. The name given with \texttt{"start\_span"} is the name of the probe.

        \begin{minted}{erlang}
        % Start the outcome instance of worker_2 
        {WorkerCtx, WorkerPid} = dqsd_otel:start_span(<<"worker_2">>),   
        % Do work here ...
        %End the outcome instance of worker_2
        dqsd_otel:end_span(WorkerCtx, WorkerPid),
        \end{minted}
